<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airlytics – Customer Satisfaction Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .bg-gradient-custom {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 50%, #2563eb 100%);
        }
        .hero-pattern {
            background-image:
                linear-gradient(135deg, rgba(14, 165, 233, 0.95) 0%, rgba(37, 99, 235, 0.95) 100%),
                url('https://images.pexels.com/photos/358319/pexels-photo-358319.jpeg?auto=compress&cs=tinysrgb&w=1920');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .form-shadow {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
        }
        select, input[type="number"], input[type="text"] {
            transition: all 0.3s ease;
        }
        select:focus, input:focus {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px -4px rgba(14, 165, 233, 0.3);
        }
        .btn-predict {
            background: linear-gradient(135deg, #0ea5e9 0%, #2563eb 100%);
            transition: all 0.3s ease;
        }
        .btn-predict:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px -8px rgba(14, 165, 233, 0.5);
        }
        .checkbox-item {
            transition: all 0.2s ease;
        }
        .checkbox-item:hover {
            background: #f0f9ff;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .result-card {
            animation: slideIn 0.5s ease;
        }
        .autocomplete-suggestions {
            position: absolute;
            z-index: 10;
            width: inherit;
            max-height: 200px;
            overflow-y: auto;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            display: none;
        }
        .autocomplete-suggestion {
            padding: 0.75rem;
            cursor: pointer;
        }
        .autocomplete-suggestion:hover {
            background: #f0f9ff;
        }
    </style>
</head>
<body class="min-h-screen hero-pattern">
    <!-- Navigation Bar -->
    <nav class="glass-effect shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center space-x-3">
                    <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3l14 9-14 9V3z"></path>
                        <circle cx="12" cy="12" r="2" fill="currentColor"></circle>
                    </svg>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Airlytics</h1>
                        <p class="text-xs text-gray-600">Predictive Intelligence Platform</p>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" class="text-gray-700 hover:text-blue-600 font-medium transition">Dashboard</a>
                    <a href="#" class="text-gray-700 hover:text-blue-600 font-medium transition">Analytics</a>
                    <a href="#" class="text-gray-700 hover:text-blue-600 font-medium transition">Reports</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Header Section -->
        <div class="text-center mb-12">
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">Customer Satisfaction Predictor</h2>
            <p class="text-xl text-blue-100">Advanced AI-powered analysis for customer experience optimization</p>
        </div>

        <!-- Form Container -->
        <div class="glass-effect rounded-2xl p-8 md:p-12 form-shadow">
            <form id="satisfactionForm" class="space-y-6">
                <!-- Row 1: Age and Gender -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="age" class="block text-sm font-semibold text-gray-700 mb-2">Age</label>
                        <input type="number" id="age" name="age" required min="0"
                            placeholder="e.g., 30"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                    </div>
                    <div>
                        <label for="gender" class="block text-sm font-semibold text-gray-700 mb-2">Gender</label>
                        <select id="gender" name="gender" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                </div>

                <!-- Row 2: Occupation and Travel Class -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="relative">
                        <label for="occupation" class="block text-sm font-semibold text-gray-700 mb-2">Occupation</label>
                        <input type="text" id="occupation" name="occupation" required
                            placeholder="e.g., Teacher, Engineer"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                        <div id="occupationSuggestions" class="autocomplete-suggestions"></div>
                    </div>
                    <div>
                        <label for="travel_class" class="block text-sm font-semibold text-gray-700 mb-2">Travel Class</label>
                        <select id="travel_class" name="travel_class" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                            <option value="">Select Class</option>
                            <option value="Business">Business</option>
                            <option value="Economy">Economy</option>
                            <option value="Luxury">Luxury</option>
                        </select>
                    </div>
                </div>

                <!-- Row 3: State of Residence and Duration of Stay -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="relative">
                        <label for="state_of_residence" class="block text-sm font-semibold text-gray-700 mb-2">State of Residence</label>
                        <input type="text" id="state_of_residence" name="state_of_residence" required
                            placeholder="e.g., California, Texas"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                        <div id="stateSuggestions" class="autocomplete-suggestions"></div>
                    </div>
                    <div>
                        <label for="duration_of_stays" class="block text-sm font-semibold text-gray-700 mb-2">Duration of Stay (Days)</label>
                        <input type="number" id="duration_of_stays" name="duration_of_stays" required min="1"
                            placeholder="e.g., 7"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                    </div>
                </div>

                <!-- Row 4: Number of Companions and Purpose of Travel -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="number_of_companions" class="block text-sm font-semibold text-gray-700 mb-2">Number of Companions</label>
                        <input type="number" id="number_of_companions" name="number_of_companions" required min="0"
                            placeholder="e.g., 2"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                    </div>
                    <div>
                        <label for="purpose_of_travel" class="block text-sm font-semibold text-gray-700 mb-2">Purpose of Travel</label>
                        <select id="purpose_of_travel" name="purpose_of_travel" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                            <option value="">Select Purpose</option>
                            <option value="Tourism">Tourism</option>
                            <option value="Research">Research</option>
                            <option value="Unknown">Unknown</option>
                            <option value="Business">Business</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>

                <!-- Special Requests -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">Special Requests</label>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <label class="checkbox-item flex items-center p-3 rounded-lg border border-gray-200 cursor-pointer">
                            <input type="checkbox" name="special_request" value="Other"
                                class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500">
                            <span class="ml-3 text-gray-700">Other</span>
                        </label>
                        <label class="checkbox-item flex items-center p-3 rounded-lg border border-gray-200 cursor-pointer">
                            <input type="checkbox" name="special_request" value="No"
                                class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500">
                            <span class="ml-3 text-gray-700">No</span>
                        </label>
                        <label class="checkbox-item flex items-center p-3 rounded-lg border border-gray-200 cursor-pointer">
                            <input type="checkbox" name="special_request" value="Special Meal"
                                class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500">
                            <span class="ml-3 text-gray-700">Special Meal</span>
                        </label>
                        <label class="checkbox-item flex items-center p-3 rounded-lg border border-gray-200 cursor-pointer">
                            <input type="checkbox" name="special_request" value="Window Seat"
                                class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500">
                            <span class="ml-3 text-gray-700">Window Seat</span>
                        </label>
                        <label class="checkbox-item flex items-center p-3 rounded-lg border border-gray-200 cursor-pointer">
                            <input type="checkbox" name="special_request" value="Extra Space Suit"
                                class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500">
                            <span class="ml-3 text-gray-700">Extra Space Suit</span>
                        </label>
                    </div>
                </div>

                <!-- Loyalty Program -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">Loyalty Program Member</label>
                    <div class="flex space-x-6">
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="loyalty_program_member" value="Yes" required
                                class="w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500">
                            <span class="ml-2 text-gray-700">Yes</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="loyalty_program_member" value="No"
                                class="w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500">
                            <span class="ml-2 text-gray-700">No</span>
                        </label>
                    </div>
                </div>

                <!-- Row 5: Total Price and Destination City -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="total_price" class="block text-sm font-semibold text-gray-700 mb-2">Total Price</label>
                        <input type="number" id="total_price" name="total_price" required min="0" step="0.01"
                            placeholder="e.g., 500.00"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                    </div>
                    <div class="relative">
                        <label for="destination_city" class="block text-sm font-semibold text-gray-700 mb-2">Destination City</label>
                        <input type="text" id="destination_city" name="destination_city" required
                            placeholder="e.g., Paris, Tokyo"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                        <div id="citySuggestions" class="autocomplete-suggestions"></div>
                    </div>
                </div>

                <!-- Row 6: Destination Country and Days Before Travel -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="relative">
                        <label for="destination_country" class="block text-sm font-semibold text-gray-700 mb-2">Destination Country</label>
                        <input type="text" id="destination_country" name="destination_country" required
                            placeholder="e.g., Italy, Japan"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                        <div id="countrySuggestions" class="autocomplete-suggestions"></div>
                    </div>
                    <div>
                        <label for="days_before_travel" class="block text-sm font-semibold text-gray-700 mb-2">Days Before Travel</label>
                        <input type="number" id="days_before_travel" name="days_before_travel" required min="0"
                            placeholder="e.g., 30"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="pt-4">
                    <button type="submit"
                        class="btn-predict w-full py-4 text-white font-semibold text-lg rounded-lg shadow-lg">
                        Predict Satisfaction
                    </button>
                </div>
            </form>

            <!-- Result Display -->
            <div id="resultContainer" class="hidden mt-8"></div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-12 text-white">
            <p class="text-sm">Powered by Advanced Machine Learning | Airlytics 2025</p>
        </div>
    </div>

    <script>
        // Define suggestion lists
        const occupations = [
            "Marketer", "Curator", "Businessperson", "Photographer", "Soldier", "Other", "Navigator", "Therapist",
            "Web Developer", "Ecologist", "Pilot", "Surveyor", "Biologist", "Journalist", "Engineer Assistant",
            "Technician", "Videographer", "Sailor", "Game Designer", "Physiotherapist", "Librarian", "Baker",
            "Social Worker", "Farmer", "Data Analyst", "Auditor", "Mathematician", "Producer", "Project Manager",
            "Scientist", "Athlete", "Driver", "Paramedic", "Research Assistant", "Software Developer", "Sommelier",
            "Dancer", "Mechanic", "Archaeologist", "Accountant", "Politician", "Teacher", "Zoologist", "Doctor",
            "Programmer", "UX Designer", "Writer", "Historian", "Architect", "Barista", "Strategist", "Translator",
            "Consultant", "Interior Designer", "Operator", "Actor", "Electrician", "Carpenter", "Astronomer",
            "Chef", "Coach", "Geologist", "Nurse", "Planner", "Comedian", "Designer", "Animator", "Physicist",
            "Firefighter", "Lawyer", "Lecturer", "Judge", "Police Officer", "Professor", "Director", "Manager",
            "Musician", "Artist", "Engineer", "Administrator", "Tutor", "Economist", "Analyst", "Veterinarian",
            "Researcher", "Inspector", "Singer", "Plumber", "Chemist", "Unknown", "Entrepreneur", "Fashion Designer",
            "Air Traffic Controller"
        ];
        const states = [
            "Georgia", "North Dakota", "Nebraska", "Nevada", "Minnesota", "Florida", "California", "Virginia",
            "Ohio", "Wyoming", "Massachusetts", "South Dakota", "Texas", "Delaware", "Oregon", "Vermont",
            "New Jersey", "Montana", "Maine", "Washington", "Idaho", "New York", "Unknown", "Utah", "Arizona",
            "Alabama", "Kansas", "West Virginia", "Iowa", "Michigan", "Wisconsin", "South Carolina", "Missouri",
            "Rhode Island", "Tennessee", "Oklahoma", "New Mexico", "Indiana", "Alaska", "Illinois", "Connecticut",
            "Maryland", "Colorado", "Hawaii", "Arkansas", "Mississippi", "North Carolina", "Pennsylvania",
            "New Hampshire", "Louisiana", "Kentucky"
        ];
        const cities = [
            "Naples", "Auckland", "Tokyo", "Granada", "Jeju Island", "Paris", "Interlaken", "Hong Kong",
            "Budapest", "Wellington", "Dubrovnik", "Stockholm", "Madrid", "Cancun", "Frankfurt", "Rio de Janeiro",
            "Doha", "London", "Krakow", "Bogotá", "Venice", "Glasgow", "St. Petersburg", "Cusco", "Hanoi",
            "Oslo", "Moscow", "Siem Reap", "Montreal", "Lima", "Abu Dhabi", "Manila", "Prague", "Shanghai",
            "Maldives", "Boracay", "Marrakech", "Munich", "Ho Chi Minh City", "Rotterdam", "Langkawi", "Bali",
            "Luang Prabang", "Santiago", "Cape Town", "Valencia", "Vienna", "Quito", "San José", "Porto",
            "Agra (Taj Mahal)", "Warsaw", "Dublin", "Florence", "Kyoto", "Athens", "Edinburgh", "Split",
            "Dubai", "Seoul", "Copenhagen", "Helsinki", "Singapore", "Amsterdam", "Machu Picchu", "Melbourne",
            "Havana", "Barcelona", "Bangkok", "Berlin", "Jaipur", "Panama City", "Toronto", "Galápagos Islands",
            "Brussels", "Reykjavik", "Zurich", "Beijing", "Sydney", "Rome", "São Paulo", "Mexico City",
            "Lisbon", "Montego Bay", "Cartagena", "Istanbul", "Galway", "Buenos Aires", "Milan", "Seville",
            "Cairo", "Kathmandu", "Queenstown", "Phuket", "Vancouver", "New Delhi", "Kuala Lumpur", "Santorini"
        ];
        const countries = [
            "Italy", "New Zealand", "Japan", "Spain", "South Korea", "France", "Switzerland", "Unknown",
            "Hungary", "Croatia", "Sweden", "Mexico", "Germany", "Brazil", "Qatar", "UK", "Poland",
            "Colombia", "Scotland", "Russia", "Peru", "Vietnam", "Norway", "Cambodia", "Canada", "UAE",
            "Philippines", "Czech Republic", "China", "Morocco", "Netherlands", "Malaysia", "Indonesia",
            "Laos", "Chile", "South Africa", "Austria", "Ecuador", "Costa Rica", "Portugal", "India",
            "Ireland", "Greece", "Denmark", "Finland", "Australia", "Cuba", "Thailand", "Panama",
            "Belgium", "Iceland", "Jamaica", "Turkey", "Argentina", "Egypt", "Nepal"
        ];

        // Autocomplete function
        function setupAutocomplete(inputId, suggestionId, options) {
            const input = document.getElementById(inputId);
            const suggestionBox = document.getElementById(suggestionId);

            input.addEventListener('input', () => {
                const query = input.value.trim().toLowerCase();
                suggestionBox.innerHTML = '';
                if (query) {
                    const filtered = options.filter(option => 
                        option.toLowerCase().startsWith(query)
                    ).slice(0, 5); // Limit to 5 suggestions
                    if (filtered.length) {
                        suggestionBox.style.display = 'block';
                        filtered.forEach(option => {
                            const div = document.createElement('div');
                            div.className = 'autocomplete-suggestion';
                            div.textContent = option;
                            div.addEventListener('click', () => {
                                input.value = option;
                                suggestionBox.innerHTML = '';
                                suggestionBox.style.display = 'none';
                            });
                            suggestionBox.appendChild(div);
                        });
                    } else {
                        suggestionBox.style.display = 'none';
                    }
                } else {
                    suggestionBox.style.display = 'none';
                }
            });

            // Hide suggestions when clicking outside
            document.addEventListener('click', (e) => {
                if (!input.contains(e.target) && !suggestionBox.contains(e.target)) {
                    suggestionBox.style.display = 'none';
                }
            });
        }

        // Initialize autocomplete for each field
        setupAutocomplete('occupation', 'occupationSuggestions', occupations);
        setupAutocomplete('state_of_residence', 'stateSuggestions', states);
        setupAutocomplete('destination_city', 'citySuggestions', cities);
        setupAutocomplete('destination_country', 'countrySuggestions', countries);

        // Form submission
        document.getElementById('satisfactionForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            // Get form data
            const formData = new FormData(e.target);
            const data = {
                age: parseInt(formData.get('age')),
                gender: formData.get('gender'),
                occupation: formData.get('occupation'),
                travel_class: formData.get('travel_class'),
                state_of_residence: formData.get('state_of_residence'),
                duration_of_stays: parseInt(formData.get('duration_of_stays')),
                number_of_companions: parseInt(formData.get('number_of_companions')),
                purpose_of_travel: formData.get('purpose_of_travel'),
                special_request: formData.getAll('special_request'),
                loyalty_program_member: formData.get('loyalty_program_member'),
                total_price: parseFloat(formData.get('total_price')),
                destination_city: formData.get('destination_city'),
                destination_country: formData.get('destination_country'),
                days_before_travel: parseInt(formData.get('days_before_travel'))
            };

            // Show loading state
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Analyzing...';
            submitBtn.disabled = true;

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    displayResult(result);
                } else {
                    displayError(result.error);
                }
            } catch (error) {
                displayError('An error occurred. Please try again.');
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });

        
        // Map cities to countries
        const cityCountryMap = {
            "Naples": "Italy", "Auckland": "New Zealand", "Tokyo": "Japan", "Granada": "Spain",
            "Jeju Island": "South Korea", "Paris": "France", "Interlaken": "Switzerland", 
            "Hong Kong": "Unknown", "Budapest": "Hungary", "Wellington": "New Zealand",
            "Dubrovnik": "Croatia", "Stockholm": "Sweden", "Madrid": "Spain", "Cancun": "Mexico",
            "Frankfurt": "Germany", "Rio de Janeiro": "Brazil", "Doha": "Qatar", "London": "UK",
            "Krakow": "Poland", "Bogotá": "Colombia", "Venice": "Italy", "Glasgow": "Scotland",
            "St. Petersburg": "Russia", "Cusco": "Peru", "Hanoi": "Vietnam", "Oslo": "Norway",
            "Moscow": "Russia", "Siem Reap": "Cambodia", "Montreal": "Canada", "Lima": "Peru",
            "Abu Dhabi": "UAE", "Manila": "Philippines", "Prague": "Czech Republic", "Shanghai": "China",
            "Maldives": "Maldives", "Boracay": "Philippines", "Marrakech": "Morocco", "Munich": "Germany",
            "Ho Chi Minh City": "Vietnam", "Rotterdam": "Netherlands", "Langkawi": "Malaysia",
            "Bali": "Indonesia", "Luang Prabang": "Laos", "Santiago": "Chile", "Cape Town": "South Africa",
            "Valencia": "Spain", "Vienna": "Austria", "Quito": "Ecuador", "San José": "Costa Rica",
            "Porto": "Portugal", "Agra (Taj Mahal)": "India", "Warsaw": "Poland", "Dublin": "Ireland",
            "Florence": "Italy", "Kyoto": "Japan", "Athens": "Greece", "Edinburgh": "Scotland",
            "Split": "Croatia", "Dubai": "UAE", "Seoul": "South Korea", "Copenhagen": "Denmark",
            "Helsinki": "Finland", "Singapore": "Singapore", "Amsterdam": "Netherlands",
            "Machu Picchu": "Peru", "Melbourne": "Australia", "Havana": "Cuba", "Barcelona": "Spain",
            "Bangkok": "Thailand", "Berlin": "Germany", "Jaipur": "India", "Panama City": "Panama",
            "Toronto": "Canada", "Galápagos Islands": "Ecuador", "Brussels": "Belgium",
            "Reykjavik": "Iceland", "Zurich": "Switzerland", "Beijing": "China", "Sydney": "Australia",
            "Rome": "Italy", "São Paulo": "Brazil", "Mexico City": "Mexico", "Lisbon": "Portugal",
            "Montego Bay": "Jamaica", "Cartagena": "Colombia", "Istanbul": "Turkey", "Galway": "Ireland",
            "Buenos Aires": "Argentina", "Milan": "Italy", "Seville": "Spain", "Cairo": "Egypt",
            "Kathmandu": "Nepal", "Queenstown": "New Zealand", "Phuket": "Thailand", "Vancouver": "Canada",
            "New Delhi": "India", "Kuala Lumpur": "Malaysia", "Santorini": "Greece"
        };

        
const cityInput = document.getElementById('destination_city');
const countryInput = document.getElementById('destination_country');

// Function to filter cities based on country
function getCitiesByCountry(country) {
    const selectedCountry = country.trim().toLowerCase();
    return Object.keys(cityCountryMap).filter(
        city => cityCountryMap[city].toLowerCase() === selectedCountry
    );
}

// Update country when city changes
cityInput.addEventListener('input', () => {
    const selectedCity = cityInput.value;
    if (cityCountryMap[selectedCity]) {
        countryInput.value = cityCountryMap[selectedCity];
    }
});


// Update city suggestions when country changes
countryInput.addEventListener('input', () => {
    const filteredCities = getCitiesByCountry(countryInput.value);
    const cityOptions = filteredCities.length ? filteredCities : cities;

    // Only update suggestion box without re-adding listeners
    const suggestionBox = document.getElementById('citySuggestions');
    cityInput.addEventListener('input', () => {
        const query = cityInput.value.trim().toLowerCase();
        suggestionBox.innerHTML = '';
        if (query) {
            const filtered = cityOptions.filter(option =>
                option.toLowerCase().startsWith(query)
            ).slice(0,5);

            if (filtered.length) {
                suggestionBox.style.display = 'block';
                filtered.forEach(option => {
                    const div = document.createElement('div');
                    div.className = 'autocomplete-suggestion';
                    div.textContent = option;
                    div.addEventListener('click', () => {
                        cityInput.value = option;
                        suggestionBox.innerHTML = '';
                        suggestionBox.style.display = 'none';
                        // Update country automatically
                        if (cityCountryMap[option]) {
                            countryInput.value = cityCountryMap[option];
                        }
                    });
                    suggestionBox.appendChild(div);
                });
            } else {
                suggestionBox.style.display = 'none';
            }
        } else {
            suggestionBox.style.display = 'none';
        }
    });
});



        function displayResult(result) {
            const container = document.getElementById('resultContainer');
            const colorMap = {
                'success': 'bg-green-50 border-green-500 text-green-800',
                'info': 'bg-blue-50 border-blue-500 text-blue-800',
                'warning': 'bg-yellow-50 border-yellow-500 text-yellow-800',
                'danger': 'bg-red-50 border-red-500 text-red-800'
            };

            const iconMap = {
                'success': '<svg class="w-12 h-12" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',
                'info': '<svg class="w-12 h-12" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>',
                'warning': '<svg class="w-12 h-12" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',
                'danger': '<svg class="w-12 h-12" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>'
            };

            container.innerHTML = `
                <div class="result-card ${colorMap[result.color]} border-l-4 rounded-lg p-8">
                    <div class="flex items-center justify-center mb-4">
                        ${iconMap[result.color]}
                    </div>
                    <h3 class="text-2xl font-bold text-center mb-2">Prediction Result</h3>
                    <div class="text-center">
                        <p class="text-lg font-semibold mb-1">Customer Satisfaction Level:</p>
                        <p class="text-3xl font-bold mb-3">${result.satisfaction_class}</p>
                        <p class="text-sm opacity-75">Confidence Score: ${result.satisfaction_score} / 5.0</p>
                    </div>
                </div>
            `;
            container.classList.remove('hidden');
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function displayError(message) {
            const container = document.getElementById('resultContainer');
            container.innerHTML = `
                <div class="result-card bg-red-50 border-l-4 border-red-500 rounded-lg p-6">
                    <div class="flex items-center">
                        <svg class="w-6 h-6 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                        <p class="text-red-800 font-medium">${message}</p>
                    </div>
                </div>
            `;
            container.classList.remove('hidden');
        }
    </script>
</body>
</html>

